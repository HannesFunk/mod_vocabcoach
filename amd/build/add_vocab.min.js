define("mod_vocabcoach/add_vocab",["exports","./repository","./general"],(function(_exports,_repository,_general){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0;let template=null;function initTemplate(){const vocabRow=document.getElementsByName("front[]")[0].closest("div.row.form-group");let temp=document.createElement("div");temp.classList.add("form-group","row","fitem"),temp.setAttribute("datagroupname","vocabrow"),temp.innerHTML=vocabRow.innerHTML,template=temp}function addRow(){let id=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,front=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",back=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const firstRow=document.getElementsByName("front[]")[0].closest("div.row.form-group"),lastRow=firstRow.parentNode.lastChild,tempRow=template.cloneNode(!0);return tempRow.querySelectorAll('input[name="vocabid[]"]')[0].value=id,tempRow.querySelectorAll('input[name="front[]"]')[0].value=front,tempRow.querySelectorAll('input[name="back[]"]')[0].value=back,lastRow.parentNode.insertBefore(tempRow,lastRow.nextSibling),!0}function addRowMaybe(callingElement){const frontInputs=document.querySelectorAll('input[name="front[]"]'),noElements=frontInputs.length;return Array.from(frontInputs).indexOf(callingElement)===noElements-1&&(addRow(),!0)}_exports.init=function(){let listidString=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-1";initTemplate();let listid=parseInt(listidString);if(-1!==listid){const row=document.getElementsByName("front[]")[0].closest("div.row.form-group");(0,_general.showElement)(row,!1);const spinnerContainer=document.createElement("div");spinnerContainer.classList.add("spinner-container");const spinner=document.createElement("div");spinner.classList.add("spinner"),spinnerContainer.appendChild(spinner),row.parentNode.insertBefore(spinnerContainer,row.nextSibling),(0,_repository.getListArrayAJAX)(listid).then((array=>{spinner.remove();for(let i=0;i<array.length;i++){let vocab=array[i];addRow(vocab.dataid,vocab.front,vocab.back)}addRow()}))}document.addEventListener("change",(event=>{const element=event.target;"front[]"===element.getAttribute("name")&&addRowMaybe(element)}));const frontElements=document.getElementsByName("front[]");frontElements[frontElements.length-1].setAttribute("data-islast",!0)}}));

//# sourceMappingURL=add_vocab.min.js.map