{"version":3,"file":"add_vocab.min.js","sources":["../src/add_vocab.js"],"sourcesContent":["import {getListArrayAJAX} from \"./repository\";\n\nlet template = null;\n\nexport const init = (listid = -1) => {\n    initTemplate();\n\n    if (listid != -1) {\n        const row = document.getElementsByName('front[]')[0].closest('div.row.form-group');\n        row.style.display = 'none';\n        const spinner = document.createElement('div');\n        spinner.classList.add('spinner');\n        row.parentNode.insertBefore(spinner, row.nextSibling);\n\n        getListArrayAJAX(listid).then(\n            (array) => {\n                spinner.remove();\n                for (let i=0; i<array.length; i++) {\n                    let vocab = array[i];\n                    addRow(vocab.dataid, vocab.front, vocab.back);\n                }\n                addRow();\n            }\n        );\n    }\n\n\n    document.addEventListener('change', event => {\n        const element = event.target;\n        if (element.getAttribute('name') === 'front[]') {\n           addRowMaybe(element);\n        }\n    });\n\n    const frontElements =  document.getElementsByName('front[]');\n    frontElements[frontElements.length - 1].setAttribute('data-islast', true);\n};\n\nfunction initTemplate() {\n    const vocabRow = document.getElementsByName('front[]')[0].closest('div.row.form-group');\n    let temp = document.createElement('div');\n    temp.classList.add('form-group', 'row', 'fitem');\n    temp.setAttribute('datagroupname', 'vocabrow');\n    temp.innerHTML = vocabRow.innerHTML;\n\n    template = temp;\n}\n\nfunction addRow(id = 0, front = \"\", back = \"\") {\n    const firstRow = document.getElementsByName('front[]')[0].closest('div.row.form-group');\n    const lastRow = firstRow.parentNode.lastChild;\n    const tempRow = template.cloneNode(true);\n    tempRow.querySelectorAll('input[name=\"vocabid[]\"]')[0].value = id;\n    tempRow.querySelectorAll('input[name=\"front[]\"]')[0].value = front;\n    tempRow.querySelectorAll('input[name=\"back[]\"]')[0].value = back;\n    lastRow.parentNode.insertBefore(tempRow, lastRow.nextSibling);\n    return true;\n}\n\nfunction addRowMaybe(callingElement) {\n    if (isLast(callingElement)) {\n        addRow();\n    }\n    return false;\n}\n\nfunction isLast(caller) {\n    const vocabRow = caller.closest('div.row.form-group');\n    return !vocabRow.nextSibling;\n}"],"names":["template","initTemplate","vocabRow","document","getElementsByName","closest","temp","createElement","classList","add","setAttribute","innerHTML","addRow","id","front","back","firstRow","lastRow","parentNode","lastChild","tempRow","cloneNode","querySelectorAll","value","insertBefore","nextSibling","addRowMaybe","callingElement","listid","row","style","display","spinner","then","array","remove","i","length","vocab","dataid","addEventListener","event","element","target","getAttribute","frontElements"],"mappings":"8KAEIA,SAAW,cAoCNC,qBACCC,SAAWC,SAASC,kBAAkB,WAAW,GAAGC,QAAQ,0BAC9DC,KAAOH,SAASI,cAAc,OAClCD,KAAKE,UAAUC,IAAI,aAAc,MAAO,SACxCH,KAAKI,aAAa,gBAAiB,YACnCJ,KAAKK,UAAYT,SAASS,UAE1BX,SAAWM,cAGNM,aAAOC,0DAAK,EAAGC,6DAAQ,GAAIC,4DAAO,SACjCC,SAAWb,SAASC,kBAAkB,WAAW,GAAGC,QAAQ,sBAC5DY,QAAUD,SAASE,WAAWC,UAC9BC,QAAUpB,SAASqB,WAAU,UACnCD,QAAQE,iBAAiB,2BAA2B,GAAGC,MAAQV,GAC/DO,QAAQE,iBAAiB,yBAAyB,GAAGC,MAAQT,MAC7DM,QAAQE,iBAAiB,wBAAwB,GAAGC,MAAQR,KAC5DE,QAAQC,WAAWM,aAAaJ,QAASH,QAAQQ,cAC1C,WAGFC,YAAYC,uBACNA,eAOatB,QAAQ,sBACfoB,aAPbb,UAEG,gBA3DS,eAACgB,+DAAU,KAC3B3B,gBAEe,GAAX2B,OAAc,OACRC,IAAM1B,SAASC,kBAAkB,WAAW,GAAGC,QAAQ,sBAC7DwB,IAAIC,MAAMC,QAAU,aACdC,QAAU7B,SAASI,cAAc,OACvCyB,QAAQxB,UAAUC,IAAI,WACtBoB,IAAIX,WAAWM,aAAaQ,QAASH,IAAIJ,8CAExBG,QAAQK,MACpBC,QACGF,QAAQG,aACH,IAAIC,EAAE,EAAGA,EAAEF,MAAMG,OAAQD,IAAK,KAC3BE,MAAQJ,MAAME,GAClBxB,OAAO0B,MAAMC,OAAQD,MAAMxB,MAAOwB,MAAMvB,MAE5CH,YAMZT,SAASqC,iBAAiB,UAAUC,cAC1BC,QAAUD,MAAME,OACe,YAAjCD,QAAQE,aAAa,SACtBlB,YAAYgB,kBAIbG,cAAiB1C,SAASC,kBAAkB,WAClDyC,cAAcA,cAAcR,OAAS,GAAG3B,aAAa,eAAe"}