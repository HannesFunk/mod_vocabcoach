{"version":3,"file":"add_vocab.min.js","sources":["../src/add_vocab.js"],"sourcesContent":["import {getListArrayAJAX} from \"./repository\";\n\nlet template = null;\n\nexport const init = (listid = -1) => {\n    initTemplate();\n\n    if (listid != -1) {\n        const row = document.getElementsByName('front[]')[0].closest('div.row.form-group');\n        row.style.display = 'none';\n        const spinnerContainer = document.createElement('div');\n        spinnerContainer.classList.add('spinner-container');\n        const spinner = document.createElement('div');\n        spinner.classList.add('spinner');\n        spinnerContainer.appendChild(spinner);\n        row.parentNode.insertBefore(spinnerContainer, row.nextSibling);\n\n        getListArrayAJAX(listid).then(\n            (array) => {\n                spinner.remove();\n                for (let i=0; i<array.length; i++) {\n                    let vocab = array[i];\n                    addRow(vocab.dataid, vocab.front, vocab.back);\n                }\n                addRow();\n            }\n        );\n    }\n\n\n    document.addEventListener('change', event => {\n        const element = event.target;\n        if (element.getAttribute('name') === 'front[]') {\n           addRowMaybe(element);\n        }\n    });\n\n    const frontElements =  document.getElementsByName('front[]');\n    frontElements[frontElements.length - 1].setAttribute('data-islast', true);\n};\n\nfunction initTemplate() {\n    const vocabRow = document.getElementsByName('front[]')[0].closest('div.row.form-group');\n    let temp = document.createElement('div');\n    temp.classList.add('form-group', 'row', 'fitem');\n    temp.setAttribute('datagroupname', 'vocabrow');\n    temp.innerHTML = vocabRow.innerHTML;\n\n    template = temp;\n}\n\nfunction addRow(id = 0, front = \"\", back = \"\") {\n    const firstRow = document.getElementsByName('front[]')[0].closest('div.row.form-group');\n    const lastRow = firstRow.parentNode.lastChild;\n    const tempRow = template.cloneNode(true);\n    tempRow.querySelectorAll('input[name=\"vocabid[]\"]')[0].value = id;\n    tempRow.querySelectorAll('input[name=\"front[]\"]')[0].value = front;\n    tempRow.querySelectorAll('input[name=\"back[]\"]')[0].value = back;\n    lastRow.parentNode.insertBefore(tempRow, lastRow.nextSibling);\n    return true;\n}\n\nfunction addRowMaybe(callingElement) {\n    const frontInputs = document.querySelectorAll('input[name=\"front[]\"]');\n    const noElements = frontInputs.length;\n    const index = Array.from(frontInputs).indexOf(callingElement);\n    if (index === noElements - 1) {\n        addRow();\n        return true;\n    }\n    return false;\n}"],"names":["template","initTemplate","vocabRow","document","getElementsByName","closest","temp","createElement","classList","add","setAttribute","innerHTML","addRow","id","front","back","firstRow","lastRow","parentNode","lastChild","tempRow","cloneNode","querySelectorAll","value","insertBefore","nextSibling","addRowMaybe","callingElement","frontInputs","noElements","length","Array","from","indexOf","listid","row","style","display","spinnerContainer","spinner","appendChild","then","array","remove","i","vocab","dataid","addEventListener","event","element","target","getAttribute","frontElements"],"mappings":"8KAEIA,SAAW,cAuCNC,qBACCC,SAAWC,SAASC,kBAAkB,WAAW,GAAGC,QAAQ,0BAC9DC,KAAOH,SAASI,cAAc,OAClCD,KAAKE,UAAUC,IAAI,aAAc,MAAO,SACxCH,KAAKI,aAAa,gBAAiB,YACnCJ,KAAKK,UAAYT,SAASS,UAE1BX,SAAWM,cAGNM,aAAOC,0DAAK,EAAGC,6DAAQ,GAAIC,4DAAO,SACjCC,SAAWb,SAASC,kBAAkB,WAAW,GAAGC,QAAQ,sBAC5DY,QAAUD,SAASE,WAAWC,UAC9BC,QAAUpB,SAASqB,WAAU,UACnCD,QAAQE,iBAAiB,2BAA2B,GAAGC,MAAQV,GAC/DO,QAAQE,iBAAiB,yBAAyB,GAAGC,MAAQT,MAC7DM,QAAQE,iBAAiB,wBAAwB,GAAGC,MAAQR,KAC5DE,QAAQC,WAAWM,aAAaJ,QAASH,QAAQQ,cAC1C,WAGFC,YAAYC,sBACXC,YAAczB,SAASmB,iBAAiB,yBACxCO,WAAaD,YAAYE,cACjBC,MAAMC,KAAKJ,aAAaK,QAAQN,kBAChCE,WAAa,IACvBjB,UACO,iBAhEK,eAACsB,+DAAU,KAC3BjC,gBAEe,GAAXiC,OAAc,OACRC,IAAMhC,SAASC,kBAAkB,WAAW,GAAGC,QAAQ,sBAC7D8B,IAAIC,MAAMC,QAAU,aACdC,iBAAmBnC,SAASI,cAAc,OAChD+B,iBAAiB9B,UAAUC,IAAI,2BACzB8B,QAAUpC,SAASI,cAAc,OACvCgC,QAAQ/B,UAAUC,IAAI,WACtB6B,iBAAiBE,YAAYD,SAC7BJ,IAAIjB,WAAWM,aAAac,iBAAkBH,IAAIV,8CAEjCS,QAAQO,MACpBC,QACGH,QAAQI,aACH,IAAIC,EAAE,EAAGA,EAAEF,MAAMZ,OAAQc,IAAK,KAC3BC,MAAQH,MAAME,GAClBhC,OAAOiC,MAAMC,OAAQD,MAAM/B,MAAO+B,MAAM9B,MAE5CH,YAMZT,SAAS4C,iBAAiB,UAAUC,cAC1BC,QAAUD,MAAME,OACe,YAAjCD,QAAQE,aAAa,SACtBzB,YAAYuB,kBAIbG,cAAiBjD,SAASC,kBAAkB,WAClDgD,cAAcA,cAActB,OAAS,GAAGpB,aAAa,eAAe"}