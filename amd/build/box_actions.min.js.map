{"version":3,"file":"box_actions.min.js","sources":["../src/box_actions.js"],"sourcesContent":["import notification from 'core/notification';\n\nconst Selectors = {\n    actions: {\n        checkBox: '[data-action=\"mod_vocabcoach/check_box\"]',\n        addUserVocab: '[data-action=\"mod_vocabcoach/add_vocab_user\"]',\n        addList: '[data-action=\"mod_vocabcoach/add_vocab_list\"]',\n        showLists: '[data-action=\"mod_vocabcoach/show_lists\"]',\n        forceCheck: '[data-action=\"mod_vocabcoach/force_check_all\"]',\n        showPdfUser: '[data-action=\"mod_vocabcoach/show_pdf_user\"]',\n    },\n    elements: {\n        dropdown: '.dropdown',\n    }\n};\n\nexport function init(cmid, userid) {\n    document.addEventListener('click', e => {\n        if (e.target.closest(Selectors.actions.forceCheck)) {\n            checkBox(cmid, e.target.closest(Selectors.actions.checkBox), true);\n        } else if (e.target.closest(Selectors.actions.showPdfUser)) {\n            const stage = e.target.closest(Selectors.actions.showPdfUser).getAttribute('data-stage');\n            window.open('vocablist_pdf.php?userid=' + userid + '&cmid=' +\n                cmid + '&stage=' + stage);\n        } else if (e.target.closest(Selectors.elements.dropdown)) {\n            return false;\n        }  else if (e.target.closest(Selectors.actions.checkBox)) {\n           checkBox(cmid, e.target.closest(Selectors.actions.checkBox));\n        } else if (e.target.closest(Selectors.actions.addUserVocab)) {\n            location.href = 'add_vocab.php?id=' + cmid + '&mode=user';\n        } else if (e.target.closest(Selectors.actions.addList)) {\n            location.href = 'add_vocab.php?id=' + cmid + '&mode=list';\n        } else if (e.target.closest(Selectors.actions.showLists)) {\n            location.href = 'lists.php?id=' + cmid;\n        }\n    });\n}\n\nfunction checkBox(cmid, box, force = false) {\n    if (parseInt(box.getAttribute('data-total')) === 0) {\n        const msgData = {\n            type: \"info\",\n            message: 'In dieser Box sind zur Zeit keine Vokabeln enthalten.'\n        };\n        notification.addNotification(msgData).then(null);\n    } else if (force && parseInt(box.getAttribute('data-due')) > 0) {\n        notification.addNotification({type: 'info',\n            message: 'Wiederhole zuerst die aktuell fälligen Vokabeln in dieser Box. ' +\n                'Erst danach kannst du auch die anderen abfragen.'}).then(null);\n    } else if (!force && parseInt(box.getAttribute('data-due')) === 0) {\n        const dueTime =  box.getAttribute('data-next-due');\n        const msgData = {\n            type: \"info\",\n            message : \"In dieser Box hast du bereits alle Vokabeln gelernt. Die nächsten Vokabeln sind in \" + dueTime\n            +\" fällig.\"\n        };\n        notification.addNotification(msgData).then(null);\n    } else {\n        const stage = box.getAttribute('data-stage');\n        location.href = 'check.php?id=' + cmid + '&stage=' + stage + \"&force=\" + force;\n    }\n}"],"names":["cmid","userid","document","addEventListener","e","target","closest","Selectors","forceCheck","checkBox","showPdfUser","stage","getAttribute","window","open","dropdown","addUserVocab","location","href","addList","showLists","box","force","parseInt","msgData","type","message","addNotification","then"],"mappings":"6LAgBqBA,KAAMC,QACvBC,SAASC,iBAAiB,SAASC,OAC3BA,EAAEC,OAAOC,QAAQC,kBAAkBC,YACnCC,SAAST,KAAMI,EAAEC,OAAOC,QAAQC,kBAAkBE,WAAW,QAC1D,GAAIL,EAAEC,OAAOC,QAAQC,kBAAkBG,aAAc,OAClDC,MAAQP,EAAEC,OAAOC,QAAQC,kBAAkBG,aAAaE,aAAa,cAC3EC,OAAOC,KAAK,4BAA8Bb,OAAS,SAC/CD,KAAO,UAAYW,WACpB,CAAA,GAAIP,EAAEC,OAAOC,QAAQC,mBAAmBQ,iBACpC,EACCX,EAAEC,OAAOC,QAAQC,kBAAkBE,UAC5CA,SAAST,KAAMI,EAAEC,OAAOC,QAAQC,kBAAkBE,WAC1CL,EAAEC,OAAOC,QAAQC,kBAAkBS,cAC1CC,SAASC,KAAO,oBAAsBlB,KAAO,aACtCI,EAAEC,OAAOC,QAAQC,kBAAkBY,SAC1CF,SAASC,KAAO,oBAAsBlB,KAAO,aACtCI,EAAEC,OAAOC,QAAQC,kBAAkBa,aAC1CH,SAASC,KAAO,gBAAkBlB,qFA/BxCO,kBACO,CACLE,SAAU,2CACVO,aAAc,gDACdG,QAAS,gDACTC,UAAW,4CACXZ,WAAY,iDACZE,YAAa,gDAPfH,mBASQ,CACNQ,SAAU,sBA0BTN,SAAST,KAAMqB,SAAKC,iEACwB,IAA7CC,SAASF,IAAIT,aAAa,eAAsB,OAC1CY,QAAU,CACZC,KAAM,OACNC,QAAS,+EAEAC,gBAAgBH,SAASI,KAAK,WACxC,GAAIN,OAASC,SAASF,IAAIT,aAAa,aAAe,wBAC5Ce,gBAAgB,CAACF,KAAM,OAChCC,QAAS,oHACgDE,KAAK,WAC/D,GAAKN,OAAoD,IAA3CC,SAASF,IAAIT,aAAa,aAQxC,OACGD,MAAQU,IAAIT,aAAa,cAC/BK,SAASC,KAAO,gBAAkBlB,KAAO,UAAYW,MAAQ,UAAYW,UAVV,OAEzDE,QAAU,CACZC,KAAM,OACNC,QAAU,sFAHGL,IAAIT,aAAa,iBAI7B,kCAEQe,gBAAgBH,SAASI,KAAK"}